version: '3.8'

services:
  ollama-large:
    image: ollama/ollama:latest
    container_name: ollama-large
    ports:
      - "11436:11434"
    volumes:
      - ollama_large_data:/root/.ollama
    environment:
      - OLLAMA_NUM_PARALLEL=2
      - OLLAMA_NUM_THREAD=2
      - NVIDIA_VISIBLE_DEVICES=all
    # Request GPU device(s) when available
    device_requests:
      - driver: nvidia
        count: all
        capabilities: ["gpu"]

volumes:
  ollama_large_data: {}
